<div class="container">
    <div class="page-header">
        <h1>
            <lucide-icon [img]="BookIcon" [size]="32"></lucide-icon>
            Livros
        </h1>
        <a routerLink="/livros/novo" class="btn btn-primary">
            <lucide-icon [img]="PlusIcon" [size]="16"></lucide-icon>
            Novo Livro
        </a>
    </div>

    <div *ngIf="loading" class="loading">
        <p>Carregando livros...</p>
    </div>

    <div *ngIf="error" class="alert alert-error">
        <span>{{ error }}</span>
        <button class="btn btn-sm btn-secondary" (click)="loadLivros()">Tentar novamente</button>
    </div>

    <div *ngIf="!loading && !error && livros.length === 0" class="card">
        <div class="empty-state">
            <lucide-icon [img]="BookIcon" [size]="48" [strokeWidth]="1"></lucide-icon>
            <p>Nenhum livro cadastrado ainda</p>
            <a routerLink="/livros/novo" class="btn btn-primary">
                <lucide-icon [img]="PlusIcon" [size]="16"></lucide-icon>
                Adicionar Livro
            </a>
        </div>
    </div>

    <div *ngIf="!loading && !error && livros.length > 0" class="card">
        <table class="table">
            <thead>
                <tr>
                    <th>Título</th>
                    <th>Autor</th>
                    <th>ISBN</th>
                    <th>Categoria</th>
                    <th>Status</th>
                    <th>Ações</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let livro of livros">
                    <td>{{ livro.titulo }}</td>
                    <td>{{ livro.autor }}</td>
                    <td>{{ livro.isbn || '-' }}</td>
                    <td>{{ livro.categoria || '-' }}</td>
                    <td>
                        <span class="badge" [ngClass]="livro.status === 'disponivel' ? 'badge-success' : 'badge-gray'">
                            <lucide-icon [img]="livro.status === 'disponivel' ? CheckIcon : LockIcon"
                                [size]="12"></lucide-icon>
                            {{ livro.status === 'disponivel' ? 'Disponível' : 'Reservado' }}
                        </span>
                    </td>
                    <td class="actions">
                        <a [routerLink]="['/livros', livro._id, 'editar']" class="btn btn-icon" title="Editar">
                            <lucide-icon [img]="EditIcon" [size]="16"></lucide-icon>
                        </a>
                        <button class="btn btn-icon btn-danger" title="Excluir" (click)="deleteLivro(livro)"
                            [disabled]="livro.status === 'reservado'">
                            <lucide-icon [img]="Trash2Icon" [size]="16"></lucide-icon>
                        </button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>